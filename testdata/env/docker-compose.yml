version: "3"
services:
    postgres:
        image: postgres:10.3
        ports:
            - "5432:5432"
        expose:
            - "5432"
        volumes:
            - /home/cfox/work/gostuff/src/gitlab.com/kazooky/docs:/opt/docs
            - /etc/timezone:/etc/timezone:ro
            - /etc/localtime:/etc/localtime:ro
            - ./testdata/pgdata:/var/lib/postgresql/data
            - ./testdata/files:/files
            - ./schema.sql:/schema.sql:ro
            - ./postgresql.conf:/etc/postgresql/postgresql.conf
            - ./resetdb.sh:/resetdb.sh
        deploy:
          resources:
              limits:
                  memory: 10G

